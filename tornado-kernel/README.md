## 飓风内核
一种基于共享调度器的异步内核实现。

### 什么是异步内核？
很多朋友可能会有这种疑问：什么是异步内核？怎么异步？和传统内核有什么区别？  
这里我们可以类比一些嵌入式外设接口，来理解同步和异步的概念。下面是一些常见的总线接口：

|总线接口|同步/异步|
|---|---|
|UART|异步|
|I2C|同步|
|SPI|同步|
|USB|同步|

可以看到上面四种总线协议中只有`UART`是异步的，它在通信方式上和其他三种总线协议有哪些区别呢？  
事实上其他三种协议中收发双方都是有时钟信号来统一`数据采样`的时机的，而`UART`总线协议中的收发双方没有统一的时钟信号，发送方通过`起始位`和`停止位`来告知接收方该什么时候进行数据采样。

回到异步内核上来，我们可以将其理解为`不依靠时钟中断来进行任务切换的操作系统内核`。

传统内核设计中，发生时钟中断通常进行线程的切换，这时候需要保存当前线程的`全部上下文`，恢复下一个线程的`全部上下文`。也就是说传统内核依靠时钟中断来进行任务切换。  
异步内核设计中，不需要时钟中断也可以实现任务切换，当一个任务运行完毕的时候，应当`主动让出`，这时候理论上需要只保存`部分上下文`，然后恢复下一个任务的上下文，去执行下一个任务。`主动让出`类似于`UART`传输协议中的`停止位`，它通知内核执行器当前任务已经完成，可以执行下一个任务。

### 飓风内核中如何使用共享调度器
飓风内核中异步运行时目前主要是内核执行器，内核执行器负责执行任务，任务的调度逻辑被封装到共享调度器中。

共享调度器以二进制包的形式编译成为二进制文件，被直接烧写到内存中的某个地址，飓风内核利用这个起始地址实例化共享调度器。

内核执行器从共享调度器中获取任务，并将对任务中的`Future`进行`poll`操作，获得一个枚举返回值(Ready/Pending)，如果返回`Ready`，直接在共享调度器中删除该任务；如果返回`Pending`，在共享调度器中设置该任务为`睡眠`状态，编译器保存这个任务的上下文。然后执行器再从共享调度器里面获取下一个任务...如此循环。

### 内置异步FAT32文件系统
[async-virtio-driver](../async-virtio-driver)实现了异步virtio块设备驱动，[async-sd](../async-sd)实现了k210上的异步sd卡驱动。在这两个异步设备驱动和Rust中`async/await`语法糖的基础上，实现异步文件系统和实现一般文件系统在写法上没有太大区别。

换句话说，在Rust异步编程模型中，异步运行时和`async/await`关键字使得我们可以用写同步代码的思维去写异步代码。

### 支持**RISC-V**指令集
飓风内核原生支持全宇宙最强指令集-`RISC-V`！